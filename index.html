
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Helping me remember&#8230;</title>
  <meta name="author" content="Tatum Szymczak">

  
  <meta name="description" content="Sometimes I find myself needing to run a few command on a remote machine. I&rsquo;ll
usually ssh into the box and hack away. But, there is an a &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://www.tatum.im">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="" rel="alternate" title="Helping me remember..." type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href='//fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet' type='text/css'>
<link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css">
<link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">

  

  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60208946-1', 'auto');
    ga('send', 'pageview');

  </script>



</head>

<body   >



<div class="navbar navbar-default navbar-fixed-top" role="navigation">
<div class="container">
  <div class="navbar-header">
    
      
      
      
      
    </button>
    <header id="header" role="banner"><hgroup>
  <h1><a href="/">Helping me remember&#8230;</a></h1>
  
</hgroup>

</header>
  </div>
  <div class="navbar-collapse collapse">

    
  <form class="navbar-form navbar-right" action="https://www.google.com/search" method="get">
      <input type="hidden" name="q" value="site:www.tatum.im" />
      <input class="search form-control" type="text" name="q" results="0" placeholder="Search"/>
  </form>





  </div><!--/.nav-collapse -->
</div>
</div>



  <div id="main" class="container">
    <div id="content">
      <div class="row">
  <div class="col-md-10">

    <div class="blog-index">
      
      
      
        <article>
          
  <header>
    
      <h1 class="entry-title"><a href="/blog/2017/01/08/run-remote-commands-over-ssh/">Run Remote Commands Over SSH!</a></h1>
    
    
      <p class="meta">

        <i class="fa fa-calendar-o"></i>
        




<time class='entry-date' datetime='2017-01-08T08:19:15-06:00'><span class='date'><span class='date-month'>Jan</span> <span class='date-day'>8</span><span class='date-suffix'>th</span>, <span class='date-year'>2017</span></span> <span class='time'>8:19 am</span></time>
        
      </p>
    
  </header>


<hr>


  <div class="entry-content"><p>Sometimes I find myself needing to run a few command on a remote machine. I&rsquo;ll
usually ssh into the box and hack away. But, there is an a alternative. You can
run command over SSH!</p>

<p>In the example below, I wasnted to keep the configuration files in the git
repository, but wanted a quick and dirty way to deploy the changes.</p>

<p>The first half of the script copies files, using scp, from the local machine to
the remote server.</p>

<p>The second half of the script (starting on line 12) runs commands from the
remote machine.  The files are moved to the correct locations and nginx and
haproxy are restarted.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="c">#!/bin/bash</span>
</span><span class='line'>
</span><span class='line'><span class="nv">PEM</span><span class="o">=</span>id_rsa.pub
</span><span class='line'><span class="nv">HOST</span><span class="o">=</span>ec2-54-234-130-49.compute-1.amazonaws.com
</span><span class='line'>
</span><span class='line'>scp -i ~/.ssh/<span class="nv">$PEM</span> ./surrogate_pop.conf ubuntu@<span class="nv">$HOST</span>:/tmp
</span><span class='line'>scp -i ~/.ssh/<span class="nv">$PEM</span> ./haproxy.cfg ubuntu@<span class="nv">$HOST</span>:/tmp
</span><span class='line'>scp -i ~/.ssh/<span class="nv">$PEM</span> ./traffic_cop.lua ubuntu@<span class="nv">$HOST</span>:/tmp
</span><span class='line'>scp -i ~/.ssh/<span class="nv">$PEM</span> ./allowed_domains.lua ubuntu@<span class="nv">$HOST</span>:/tmp
</span><span class='line'>
</span><span class='line'><span class="c">## These are executed on the remote host</span>
</span><span class='line'>ssh -i ~/.ssh/<span class="nv">$PEM</span> ubuntu@<span class="nv">$HOST</span> <span class="s1">&#39;bash -s&#39;</span> <span class="s">&lt;&lt;EOF</span>
</span><span class='line'><span class="s">sudo mv /tmp/traffic_cop.lua /usr/share/nginx/traffic_cop.lua</span>
</span><span class='line'><span class="s">sudo mv /tmp/allowed_domains.lua /usr/share/nginx/allowed_domains.lua</span>
</span><span class='line'><span class="s">sudo mv /tmp/surrogate_pop.conf /etc/nginx/sites-enabled/surrogate_pop.conf</span>
</span><span class='line'><span class="s">sudo service nginx restart</span>
</span><span class='line'>
</span><span class='line'><span class="s">sudo mv /tmp/haproxy.cfg /etc/haproxy/haproxy.cfg</span>
</span><span class='line'><span class="s">sudo service haproxy restart</span>
</span><span class='line'><span class="s">EOF</span>
</span></code></pre></td></tr></table></div></figure>

</div>
  
  


        </article>
      
      
        <article>
          
  <header>
    
      <h1 class="entry-title"><a href="/blog/2016/08/25/cloudformation-apigateway-and-lambda/">Cloudformation ApiGateway and Lambda</a></h1>
    
    
      <p class="meta">

        <i class="fa fa-calendar-o"></i>
        




<time class='entry-date' datetime='2016-08-25T07:44:12-05:00'><span class='date'><span class='date-month'>Aug</span> <span class='date-day'>25</span><span class='date-suffix'>th</span>, <span class='date-year'>2016</span></span> <span class='time'>7:44 am</span></time>
        
      </p>
    
  </header>


<hr>


  <div class="entry-content"><p>Recently, I&rsquo;ve been excited by <a href="http://martinfowler.com/articles/serverless.html">serverless</a>
technology. I began using the <a href="http://serverless.com/">serverless framework</a>
for code boilerplate and deployment. After some time using the framework, I began feeling pain.
Serverless is an excellent project, but it&rsquo;s moving <strong>very</strong> fast. For example, The
framework uses cloudformation for resource dependencies such as dynamoDb, ApiGateway, roles and permissions (to name a few).
Cloudformation is <strong>also</strong> moving very fast. Support for <a href="https://aws.amazon.com/about-aws/whats-new/2016/04/aws-cloudformation-adds-support-for-amazon-api-gateway-and-updated-resource-support/">ApiGateway was added to cloudformation on April
18th, 2016</a>.
 As new features are added to cloudformation, you&rsquo;ll be stuck waiting for
serverless to implement features for feature parity. I&rsquo;ve started using
cloudformation direclty and relying on bash scripts for deployment. I&rsquo;m quite
happy with the results.</p>

<h3>Cloudformation stack</h3>

<p>Once we have a
<a href="https://github.com/tatums/cloudformation-apigateway-lambda/blob/master/cloudformation.json">cloudformation template</a>,
the AWS cli provides us with everthing we need. Using the AWS CLI we can create the stack like so.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>aws cloudformation create-stack <span class="se">\</span>
</span><span class='line'>  --stack-name hello-world <span class="se">\</span>
</span><span class='line'>  --template-body file://./cloudformation.json <span class="se">\</span>
</span><span class='line'>  --capabilities CAPABILITY_IAM <span class="o">&amp;&amp;</span> <span class="se">\</span>
</span><span class='line'>  aws cloudformation <span class="nb">wait </span>stack-create-complete <span class="se">\</span>
</span><span class='line'>      --stack-name hello-world
</span></code></pre></td></tr></table></div></figure>


<p>The first command fires off an async create request to AWS.
The second command tells our shell to wait for stack creation to complete.</p>

<p>After that&rsquo;s complete, we&rsquo;ll have created a few resources in AWS. =)  Next, we&rsquo;ll need a way to deploy.</p>

<h3>Deployment</h3>

<p>We have a few tasks for a complete deployment. We should seperate out the
lambda depoyment and the ApiGateway deployment, but in this case I did not.</p>

<ul>
<li>Update Lambda Code - Install any dependencies, zip our code, and upload it.</li>
<li>Publish a Version - From the latest version, It will tag a copy.</li>
<li>Update the alias - Our lambda is pointed to an alias. This will point the lambda to our new version.</li>
<li>deploy ApiGateway - Any changes we make to ApiGateway requires a deploy.</li>
</ul>


<p>The script takes two args. The <code>api-gateway-id</code> and the <code>function-name</code>.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>./deploy.sh abc123 hello-word
</span></code></pre></td></tr></table></div></figure>




<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="c">#!/bin/bash</span>
</span><span class='line'>
</span><span class='line'><span class="nv">apiId</span><span class="o">=</span><span class="nv">$1</span>
</span><span class='line'><span class="nv">functionName</span><span class="o">=</span><span class="nv">$2</span>
</span><span class='line'><span class="nv">profile</span><span class="o">=</span>personal
</span><span class='line'>
</span><span class='line'><span class="nv">YELLOW</span><span class="o">=</span><span class="s1">&#39;\033[0;33m&#39;</span>
</span><span class='line'><span class="nv">WHITE</span><span class="o">=</span><span class="s1">&#39;\033[0m&#39;</span> <span class="c"># No Color</span>
</span><span class='line'>
</span><span class='line'><span class="k">function</span> zipLambda <span class="o">{</span>
</span><span class='line'>  say <span class="s2">&quot;Zipping files.&quot;</span> <span class="o">&amp;&amp;</span> <span class="se">\</span>
</span><span class='line'>  rm -rf target <span class="o">&amp;&amp;</span> <span class="se">\</span>
</span><span class='line'>  mkdir -p target <span class="o">&amp;&amp;</span> <span class="se">\</span>
</span><span class='line'>  cp -r *.js package.json target/ <span class="o">&amp;&amp;</span> <span class="se">\</span>
</span><span class='line'>  <span class="nb">pushd </span>target <span class="o">&amp;&amp;</span> <span class="se">\</span>
</span><span class='line'>  npm install --production <span class="o">&amp;&amp;</span> <span class="se">\</span>
</span><span class='line'>  zip -r <span class="s2">&quot;${functionName}.zip&quot;</span> . <span class="o">&amp;&amp;</span> <span class="se">\</span>
</span><span class='line'>  <span class="nb">popd</span>
</span><span class='line'><span class="o">}</span>
</span><span class='line'>
</span><span class='line'><span class="k">function</span> say <span class="o">{</span>
</span><span class='line'>  <span class="nb">printf</span> <span class="s2">&quot;\n${YELLOW} $@ ${WHITE}\n&quot;</span>
</span><span class='line'><span class="o">}</span>
</span><span class='line'>
</span><span class='line'><span class="k">function</span> updateLambdaCode <span class="o">{</span>
</span><span class='line'>  say <span class="s2">&quot;Uploading new lambda code.&quot;</span> <span class="o">&amp;&amp;</span> <span class="se">\</span>
</span><span class='line'>  aws lambda update-function-code --function-name <span class="nv">$functionName</span> --zip-file <span class="s2">&quot;fileb://target/${functionName}.zip&quot;</span> --profile <span class="nv">$profile</span>
</span><span class='line'><span class="o">}</span>
</span><span class='line'>
</span><span class='line'><span class="k">function</span> publishVersion <span class="o">{</span>
</span><span class='line'>  say <span class="s2">&quot;Publishing a new version.&quot;</span> <span class="o">&amp;&amp;</span> <span class="se">\</span>
</span><span class='line'>  aws lambda publish-version --function-name <span class="nv">$functionName</span> --profile <span class="nv">$profile</span>
</span><span class='line'><span class="o">}</span>
</span><span class='line'>
</span><span class='line'><span class="k">function</span> updateAlias <span class="o">{</span>
</span><span class='line'>  <span class="nv">version</span><span class="o">=</span><span class="k">$(</span>aws lambda list-versions-by-function --function-name <span class="nv">$functionName</span> --profile personal <span class="p">|</span> grep Version <span class="p">|</span> tail -n <span class="m">1</span> <span class="p">|</span> cut -d <span class="s1">&#39;&quot;&#39;</span> -f 4<span class="k">)</span> <span class="o">&amp;&amp;</span> <span class="se">\</span>
</span><span class='line'>  say <span class="s2">&quot;Updating the alias to version ${version}.&quot;</span> <span class="o">&amp;&amp;</span> <span class="se">\</span>
</span><span class='line'>  aws lambda update-alias --function-name <span class="nv">$functionName</span> --function-version <span class="nv">$version</span> --name prod --profile <span class="nv">$profile</span>
</span><span class='line'><span class="o">}</span>
</span><span class='line'><span class="k">function</span> deployApiGatway <span class="o">{</span>
</span><span class='line'>  say <span class="s2">&quot;Deploying to Api Gateway.&quot;</span> <span class="o">&amp;&amp;</span> <span class="se">\</span>
</span><span class='line'>  aws apigateway create-deployment --rest-api-id <span class="nv">$apiId</span> --stage-name v1 --profile <span class="nv">$profile</span>
</span><span class='line'><span class="o">}</span>
</span><span class='line'><span class="nb">printf</span> <span class="s2">&quot;\n🚀🚀🚀 SHIP IT!!! 🚀🚀🚀 \n\n&quot;</span>
</span><span class='line'>zipLambda <span class="o">&amp;&amp;</span> <span class="se">\</span>
</span><span class='line'>  updateLambdaCode <span class="o">&amp;&amp;</span> <span class="se">\</span>
</span><span class='line'>  publishVersion <span class="o">&amp;&amp;</span> <span class="se">\</span>
</span><span class='line'>  updateAlias <span class="o">&amp;&amp;</span> <span class="se">\</span>
</span><span class='line'>  deployApiGatway
</span></code></pre></td></tr></table></div></figure>



</div>
  
  


        </article>
      
      
        <article>
          
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/08/15/dont-be-clever-stupid/">Don&#8217;t Be Clever Stupid</a></h1>
    
    
      <p class="meta">

        <i class="fa fa-calendar-o"></i>
        




<time class='entry-date' datetime='2015-08-15T10:42:18-05:00'><span class='date'><span class='date-month'>Aug</span> <span class='date-day'>15</span><span class='date-suffix'>th</span>, <span class='date-year'>2015</span></span> <span class='time'>10:42 am</span></time>
        
      </p>
    
  </header>


<hr>


  <div class="entry-content"><p>Everyone loves clever, right!?. Well, DONT! A clever solution is technical debt.</p>

<blockquote>
Any fool can write code that a computer can understand. 
Good programmers write code that humans can understand. – Martin Fowler
</blockquote>


<p>So why do we do this? I belevie we enjoy knowing something that confuses others. It makes us feel smart. But please avoid this. Avoid this for your app, for your teammates, and for your future self.</p>
</div>
  
  


        </article>
      
      
        <article>
          
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/08/13/activemodel-model/">ActiveModel::Model</a></h1>
    
    
      <p class="meta">

        <i class="fa fa-calendar-o"></i>
        




<time class='entry-date' datetime='2015-08-13T19:37:30-05:00'><span class='date'><span class='date-month'>Aug</span> <span class='date-day'>13</span><span class='date-suffix'>th</span>, <span class='date-year'>2015</span></span> <span class='time'>7:37 pm</span></time>
        
      </p>
    
  </header>


<hr>


  <div class="entry-content"><p>Rails 4 brought us <code>ActiveModel::Model</code>. It provides a light weight interface that&rsquo;s similar to an <code>ActiveRecord::Base</code> model.</p>

<p>for example, I can create a Person class like so.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="k">class</span> <span class="nc">Person</span>
</span><span class='line'>  <span class="kp">include</span> <span class="no">ActiveModel</span><span class="o">::</span><span class="no">Model</span>
</span><span class='line'>  <span class="kp">attr_accessor</span> <span class="ss">:name</span><span class="p">,</span> <span class="ss">:age</span>
</span><span class='line'>
</span><span class='line'>  <span class="n">validates</span> <span class="ss">:name</span><span class="p">,</span> <span class="kp">true</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">def</span> <span class="nf">save</span>
</span><span class='line'>    <span class="c1">## Do cool stuff here...</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>




<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="no">Loading</span> <span class="n">development</span> <span class="n">environment</span> <span class="p">(</span><span class="no">Rails</span> <span class="mi">4</span><span class="o">.</span><span class="mi">2</span><span class="o">.</span><span class="mi">1</span><span class="p">)</span>
</span><span class='line'><span class="n">irb</span><span class="p">(</span><span class="n">main</span><span class="p">):</span><span class="mo">001</span><span class="p">:</span><span class="mi">0</span><span class="o">&gt;</span> <span class="nb">p</span> <span class="o">=</span> <span class="no">Person</span><span class="o">.</span><span class="n">new</span> <span class="ss">age</span><span class="p">:</span> <span class="mi">21</span>
</span><span class='line'><span class="o">=&gt;</span> <span class="c1">#&lt;Person:0x007fc6367193b0 @age=21&gt;</span>
</span><span class='line'><span class="n">irb</span><span class="p">(</span><span class="n">main</span><span class="p">):</span><span class="mo">002</span><span class="p">:</span><span class="mi">0</span><span class="o">&gt;</span> <span class="nb">p</span><span class="o">.</span><span class="n">valid?</span>
</span><span class='line'><span class="o">=&gt;</span> <span class="kp">false</span>
</span><span class='line'><span class="n">irb</span><span class="p">(</span><span class="n">main</span><span class="p">):</span><span class="mo">003</span><span class="p">:</span><span class="mi">0</span><span class="o">&gt;</span> <span class="nb">p</span><span class="o">.</span><span class="n">errors</span>
</span><span class='line'><span class="o">=&gt;</span> <span class="c1">#&lt;ActiveModel::Errors:0x007fc638000a68 @base=#&lt;Person:0x007fc6367193b0 @age=21, @validation_context=nil, @errors=#&lt;ActiveModel::Errors:0x007fc638000a68 ...&gt;&gt;, @messages={:name=&gt;[&quot;can&#39;t be blank&quot;]}&gt;</span>
</span><span class='line'><span class="n">irb</span><span class="p">(</span><span class="n">main</span><span class="p">):</span><span class="mo">004</span><span class="p">:</span><span class="mi">0</span><span class="o">&gt;</span>
</span></code></pre></td></tr></table></div></figure>




<hr> </hr>


<p>This is great for instances where you don&rsquo;t need a full database backed Active Record model. I&rsquo;ve used them for form objects and in controllers where I have complex logic.</p>

<p>You can think of these as higher level abstractions above your ActiveRecord classes. Also, be conscious of the dependancy direction. An ActiveModel model can depend on an ActiveRecord model but your ActiveRecord models shouldn&rsquo;t depend on an ActiveModel model.</p>

<p><br />
Here&rsquo;s a more involved example.
Lets say I have 2 ActiveRecord classes <code>Org</code> and <code>User</code></p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="k">class</span> <span class="nc">Org</span> <span class="o">&lt;</span> <span class="no">ActiveRecord</span><span class="o">::</span><span class="no">Base</span>
</span><span class='line'>  <span class="n">validates</span> <span class="ss">:name</span><span class="p">,</span> <span class="ss">presence</span><span class="p">:</span> <span class="kp">true</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>




<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="k">class</span> <span class="nc">User</span> <span class="o">&lt;</span> <span class="no">ActiveRecord</span><span class="o">::</span><span class="no">Base</span>
</span><span class='line'>  <span class="n">validates</span> <span class="ss">:first</span><span class="p">,</span> <span class="ss">:last</span><span class="p">,</span> <span class="ss">presence</span><span class="p">:</span> <span class="kp">true</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<p>Now I&rsquo;ll create an ActiveModel model (non database)</p>

<p>Notice the validates_each method&hellip; Its going to check each of the ActiveRecord objects and let them raise up any errors to the Signup class.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="k">class</span> <span class="nc">Signup</span>
</span><span class='line'>  <span class="kp">include</span> <span class="no">ActiveModel</span><span class="o">::</span><span class="no">Model</span>
</span><span class='line'>  <span class="kp">attr_accessor</span> <span class="ss">:first</span><span class="p">,</span> <span class="ss">:last</span><span class="p">,</span> <span class="ss">:name</span>
</span><span class='line'>
</span><span class='line'>  <span class="n">validates_each</span> <span class="ss">:user</span><span class="p">,</span> <span class="ss">:org</span> <span class="k">do</span> <span class="o">|</span><span class="n">record</span><span class="p">,</span> <span class="kp">attr</span><span class="p">,</span> <span class="n">value</span><span class="o">|</span>
</span><span class='line'>    <span class="k">unless</span> <span class="n">value</span><span class="o">.</span><span class="n">valid?</span>
</span><span class='line'>      <span class="n">value</span><span class="o">.</span><span class="n">errors</span><span class="o">.</span><span class="n">each</span> <span class="p">{</span> <span class="o">|</span><span class="n">k</span><span class="p">,</span><span class="n">v</span><span class="o">|</span> <span class="n">record</span><span class="o">.</span><span class="n">errors</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">k</span><span class="o">.</span><span class="n">to_sym</span><span class="p">,</span> <span class="n">v</span><span class="p">)</span> <span class="p">}</span>
</span><span class='line'>    <span class="k">end</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>  <span class="c1">## must return boolean</span>
</span><span class='line'>  <span class="k">def</span> <span class="nf">save</span>
</span><span class='line'>    <span class="k">if</span> <span class="n">valid?</span>
</span><span class='line'>      <span class="n">org</span><span class="o">.</span><span class="n">save</span> <span class="o">&amp;&amp;</span> <span class="n">user</span><span class="o">.</span><span class="n">save</span>
</span><span class='line'>    <span class="k">else</span>
</span><span class='line'>      <span class="kp">false</span>
</span><span class='line'>    <span class="k">end</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>  <span class="kp">private</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">def</span> <span class="nf">org</span>
</span><span class='line'>      <span class="vi">@org</span> <span class="o">||=</span> <span class="no">Org</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="nb">name</span><span class="p">:</span> <span class="nb">name</span><span class="p">)</span>
</span><span class='line'>    <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">def</span> <span class="nf">user</span>
</span><span class='line'>      <span class="vi">@user</span> <span class="o">||=</span> <span class="no">User</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="ss">first</span><span class="p">:</span> <span class="n">first</span><span class="p">,</span> <span class="ss">last</span><span class="p">:</span> <span class="n">last</span><span class="p">)</span>
</span><span class='line'>    <span class="k">end</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<p>Awesome right!!</p>

<p>So why do all this?  Well, the single responsibilty states that every class should have responsibility over a single part of the functionality provided by the software, and that responsibility should be entirely encapsulated by the class.  ActiveRecord is responsible for persistence to the database. This will keep our classes with a narrow focus and allow us to refactor and create more use cases in the future. I think it&rsquo;s a win.  I find this strategy is generally good for one directional workflows such as signup or in a shopping app cart checkout.</p>
</div>
  
  


        </article>
      
      
        <article>
          
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/03/14/rails-configuration/">Rails Configuration</a></h1>
    
    
      <p class="meta">

        <i class="fa fa-calendar-o"></i>
        




<time class='entry-date' datetime='2015-03-14T10:25:26-05:00'><span class='date'><span class='date-month'>Mar</span> <span class='date-day'>14</span><span class='date-suffix'>th</span>, <span class='date-year'>2015</span></span> <span class='time'>10:25 am</span></time>
        
      </p>
    
  </header>


<hr>


  <div class="entry-content"><p>Occasionally I&rsquo;ll see things like this in a code base.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="k">def</span> <span class="nf">api_host</span>
</span><span class='line'>  <span class="k">if</span> <span class="no">Rails</span><span class="o">.</span><span class="n">production?</span>
</span><span class='line'>    <span class="s2">&quot;http://prod.fake.api.url&quot;</span>
</span><span class='line'>  <span class="k">else</span>
</span><span class='line'>    <span class="s2">&quot;http://stag.fake.api.url&quot;</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<p>I try to avoid writting methods like this.  Rails provides a nice way to set environment specific variables.</p>

<p><a href="http://guides.rubyonrails.org/configuring.html#custom-configuration">http://guides.rubyonrails.org/configuring.html#custom-configuration</a></p>

<p><code>config/environments/staging.rb</code></p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="n">config</span><span class="o">.</span><span class="n">api_host</span> <span class="o">=</span> <span class="s2">&quot;http://stag.fake.api.url&quot;</span>
</span></code></pre></td></tr></table></div></figure>


<p><code>config/environments/production.rb</code></p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="n">config</span><span class="o">.</span><span class="n">api_host</span> <span class="o">=</span> <span class="s2">&quot;http://prod.fake.api.url&quot;</span>
</span></code></pre></td></tr></table></div></figure>


<p>So now you can refactor the method to this.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="k">def</span> <span class="nf">api_host</span>
</span><span class='line'>  <span class="no">Rails</span><span class="o">.</span><span class="n">configuration</span><span class="o">.</span><span class="n">api_host</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>



</div>
  
  


        </article>
      
      
        <article>
          
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/02/28/crypto/">Crypto</a></h1>
    
    
      <p class="meta">

        <i class="fa fa-calendar-o"></i>
        




<time class='entry-date' datetime='2015-02-28T16:05:01-06:00'><span class='date'><span class='date-month'>Feb</span> <span class='date-day'>28</span><span class='date-suffix'>th</span>, <span class='date-year'>2015</span></span> <span class='time'>4:05 pm</span></time>
        
      </p>
    
  </header>


<hr>


  <div class="entry-content"><p>I&rsquo;ve been playing around with Public-key cryptography or asymmetric cryptography. With revaltions from Eric Snowden on programs like PRISM, I feel that encryption is more important than ever.</p>

<p><em>From Wikipedia</em>
<a href="http://en.wikipedia.org/wiki/Public-key_cryptography">
  <blockquote>
  Public-key cryptography is a class of cryptographic algorithms which requires two separate keys, one of which is secret (or private) and one of which is public. Although different, the two parts of this key pair are mathematically linked. The public key is used to encrypt plaintext or to verify a digital signature; whereas the private key is used to decrypt ciphertext or to create a digital signature.
  </blockquote>
</a></p>

<p>There are two main uses for public key crypto.</p>

<ol>
<li><p>Public key encryption.  A message is encrypted with a recipient&rsquo;s public key. The message can only be unencrypted by the holder of the private key.</p></li>
<li><p>Digital Signature.  A message is signed with a the senders private key to generate a cryptographic hash. Using the public key, one can verify the message was indeed sent with the coresponding private key and can ensure the message has not been altered.</p></li>
</ol>


<h3>Keys</h3>

<p>First, let&rsquo;s generate some keys. From the private key we will also generate the public key.  Remember the private and public key are mathematically linked.  This is important.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="o">[</span><span class="mi">1</span><span class="o">]</span> <span class="n">pry</span><span class="p">(</span><span class="n">main</span><span class="p">)</span><span class="o">&gt;</span> <span class="nb">require</span> <span class="s2">&quot;openssl&quot;</span>
</span><span class='line'><span class="o">=&gt;</span> <span class="kp">true</span>
</span><span class='line'><span class="o">[</span><span class="mi">2</span><span class="o">]</span> <span class="n">pry</span><span class="p">(</span><span class="n">main</span><span class="p">)</span><span class="o">&gt;</span> <span class="n">private_key</span> <span class="o">=</span> <span class="no">OpenSSL</span><span class="o">::</span><span class="no">PKey</span><span class="o">::</span><span class="no">RSA</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="mi">2048</span><span class="p">)</span>
</span><span class='line'><span class="o">=&gt;</span> <span class="c1">#&lt;OpenSSL::PKey::RSA:0x007ff03b379c30&gt;</span>
</span><span class='line'><span class="o">[</span><span class="mi">3</span><span class="o">]</span> <span class="n">pry</span><span class="p">(</span><span class="n">main</span><span class="p">)</span><span class="o">&gt;</span> <span class="n">public_key</span> <span class="o">=</span> <span class="n">private_key</span><span class="o">.</span><span class="n">public_key</span>
</span><span class='line'><span class="o">=&gt;</span> <span class="c1">#&lt;OpenSSL::PKey::RSA:0x007ff03c3330b8&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>Great.  Now we have a key pair.  We can write these keys to disk if we like.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="c1">## write the private key to disk.</span>
</span><span class='line'><span class="no">File</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="s2">&quot;~/.ssh/private_key&quot;</span><span class="p">,</span> <span class="s2">&quot;w+&quot;</span><span class="p">)</span> <span class="k">do</span> <span class="o">|</span><span class="n">f</span><span class="o">|</span>
</span><span class='line'>  <span class="n">f</span><span class="o">.</span><span class="n">write</span> <span class="n">private_key</span><span class="o">.</span><span class="n">to_pem</span>
</span><span class='line'><span class="k">end</span>
</span><span class='line'><span class="c1"># write the public key to disk.</span>
</span><span class='line'><span class="no">File</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="s2">&quot;~/.ssh/public_key.pem&quot;</span><span class="p">,</span> <span class="s2">&quot;w+&quot;</span><span class="p">)</span> <span class="k">do</span> <span class="o">|</span><span class="n">f</span><span class="o">|</span>
</span><span class='line'>  <span class="n">f</span><span class="o">.</span><span class="n">write</span> <span class="n">public_key</span><span class="o">.</span><span class="n">to_pem</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<p>We can read the key in from key like so.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="n">key</span> <span class="o">=</span> <span class="no">OpenSSL</span><span class="o">::</span><span class="no">PKey</span><span class="o">::</span><span class="no">RSA</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="no">File</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="s2">&quot;~/.ssh/private_key&quot;</span><span class="p">))</span>
</span></code></pre></td></tr></table></div></figure>


<h3>Public key enctryption</h3>

<p>We&rsquo;ll be encrypting a message with the public key. So it can only be unenctrypted by the owner of the private key.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="c1">## Use the public key to encrypt a message</span>
</span><span class='line'><span class="o">[</span><span class="mi">4</span><span class="o">]</span> <span class="n">pry</span><span class="p">(</span><span class="n">main</span><span class="p">)</span><span class="o">&gt;</span> <span class="n">encrypted_data</span> <span class="o">=</span> <span class="n">public_key</span><span class="o">.</span><span class="n">public_encrypt</span><span class="p">(</span><span class="s2">&quot;Some private data is here.&quot;</span><span class="p">)</span>
</span><span class='line'><span class="o">=&gt;</span> <span class="s2">&quot;</span><span class="se">\x9B\f\xD2\&quot;\x02</span><span class="s2">l</span><span class="se">\x0E\xFB\x18\xFA\xA2\xCC</span><span class="s2">;</span><span class="se">\x9F\xC2</span><span class="s2">r</span><span class="se">\xFA\x88\x94\\\xDB</span><span class="s2">ZY</span><span class="se">\x96</span><span class="s2">4</span><span class="se">\xE3\x13</span><span class="s2">i</span><span class="se">\xDB\xB5\xB4</span><span class="s2">&lt;</span><span class="se">\x8E\xEC\xB8\xAB\&quot;</span><span class="s2">a</span><span class="se">\xE1\xE0\x01\x8C</span><span class="s2">b</span><span class="se">\xEC\xAE\x86\xC0</span><span class="s2">!</span><span class="se">\x18\xC8\xA9\xDE</span><span class="s2">B</span><span class="se">\e</span><span class="s2">^</span><span class="se">\xCC</span><span class="s2">e</span><span class="se">\x11\xDC\x19\x81\xDC\x98\x1E</span><span class="s2">X</span><span class="se">\x11\xD6\&quot;</span><span class="s2">bUJ</span><span class="se">\xB0</span><span class="s2">B</span><span class="se">\xED\x96\x03\x9F</span><span class="s2">}</span><span class="se">\xF7</span><span class="s2">I</span><span class="se">\xFD\x9F\x04\x04\xF4</span><span class="s2">Q</span><span class="se">\xA7</span><span class="s2">H</span><span class="se">\x9C\b\xC5\a\xE1\xA4\x02</span><span class="s2">kx</span><span class="se">\xF4</span><span class="s2">6A% </span><span class="se">\xEB\xEB</span><span class="s2">: </span><span class="se">\xD1\xA2\xFF\xA4</span><span class="s2">$</span><span class="se">\xBD</span><span class="s2">P</span><span class="se">\x9F</span><span class="s2">R</span><span class="se">\xE9\xD3\x9F\r</span><span class="s2">&gt;</span><span class="se">\x8E</span><span class="s2">5</span><span class="se">\xD9\x10\xE8\x9D</span><span class="s2">Yd</span><span class="se">\e</span><span class="s2">`</span><span class="se">\x8E\xE0\xBD\xE5\\\x02\xF6\x83\v\x15\xD4</span><span class="s2">m</span><span class="se">\x03\xCD</span><span class="s2">J</span><span class="se">\x9A</span><span class="s2">*</span><span class="se">\xA6\xF5</span><span class="s2">S9</span><span class="se">\xD2</span><span class="s2">M</span><span class="se">\x10\xD5</span><span class="s2"> 7</span><span class="se">\x92\xCE\xF0\xB9</span><span class="s2">&lt;</span><span class="se">\xAF</span><span class="s2">e</span><span class="se">\x9A\xAE\x8E</span><span class="s2">`</span><span class="se">\xAD</span><span class="s2">W</span><span class="se">\x93\x91</span><span class="s2">;HZ</span><span class="se">\xEB\xD8\xFF\xDE\x02\x10</span><span class="s2">m</span><span class="se">\x9D\xF2</span><span class="s2">*</span><span class="se">\t</span><span class="s2">L2</span><span class="se">\xE2</span><span class="s2">`K</span><span class="se">\xC8\x0E</span><span class="s2">)O</span><span class="se">\x86\xDA\xAF</span><span class="s2">k4</span><span class="se">\xD0\r</span><span class="s2">N</span><span class="se">\xF3</span><span class="s2">%}</span><span class="se">\xEA</span><span class="s2">M</span><span class="se">\x15</span><span class="s2">he</span><span class="se">\xDF\x0F\xC6\xE5\xAA</span><span class="s2">$</span><span class="se">\x19\x03</span><span class="s2">V</span><span class="se">\xBE\x0E</span><span class="s2">~</span><span class="se">\x8E</span><span class="s2">Lv</span><span class="se">\x9C\xC7\xB4</span><span class="s2">o</span><span class="se">\xA1</span><span class="s2">3</span><span class="se">\xE2\xDE\xE2</span><span class="s2">t!]-</span><span class="se">\xC8\x88\xAF\xE3\xD5\xFD</span><span class="s2">`T</span><span class="se">\xD9\xCD</span><span class="s2">s</span><span class="se">\xFF\xAE</span><span class="s2">(&lt;</span><span class="se">\xBD\xB9</span><span class="s2">&quot;</span>
</span></code></pre></td></tr></table></div></figure>


<p>This will result in some unreadable binary data. Next we&rsquo;ll decrypt this data with the private key.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="c1">## Use the private key to decrypt</span>
</span><span class='line'><span class="o">[</span><span class="mi">5</span><span class="o">]</span> <span class="n">pry</span><span class="p">(</span><span class="n">main</span><span class="p">)</span><span class="o">&gt;</span> <span class="n">private_key</span><span class="o">.</span><span class="n">private_decrypt</span><span class="p">(</span><span class="n">enc</span><span class="p">)</span>
</span><span class='line'><span class="o">=&gt;</span> <span class="s2">&quot;Some private data is here.&quot;</span>
</span></code></pre></td></tr></table></div></figure>


<p>Nice!</p>

<p>The public key can encrypt but cannot decrypt the message. This enctryption only works in one direction. Only the private key can decrypt that message. You can also encrypt messages with a private key. Those messages can be unenctrypted with the public key and the private key.</p>

<p>Asymmetric public/private key encryption is slow and victim to attack in cases where it is used without padding or directly to encrypt larger chunks of data. Typical use cases for RSA encryption involve &ldquo;wrapping&rdquo; a symmetric key with the public key of the recipient who would &ldquo;unwrap&rdquo; that symmetric key again using their private key.</p>

<p>NOTE - The enctrypted messages are in binary format. If we want to encode the data for transmission accoss the net, we&rsquo;ll want to use something like base64.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="o">[</span><span class="mi">6</span><span class="o">]</span> <span class="n">pry</span><span class="p">(</span><span class="n">main</span><span class="p">)</span><span class="o">&gt;</span> <span class="nb">require</span> <span class="s2">&quot;base64&quot;</span>
</span><span class='line'><span class="o">=&gt;</span> <span class="kp">true</span>
</span><span class='line'><span class="o">[</span><span class="mi">7</span><span class="o">]</span> <span class="n">pry</span><span class="p">(</span><span class="n">main</span><span class="p">)</span><span class="o">&gt;</span> <span class="n">enc_string</span> <span class="o">=</span> <span class="no">Base64</span><span class="o">.</span><span class="n">encode64</span><span class="p">(</span><span class="n">encrypted</span><span class="p">)</span>
</span><span class='line'><span class="o">=&gt;</span> <span class="s2">&quot;iRBt6WHFYP2sn2Qv+qs16js/EJqBGaTWyxUH7iI/aj3UEw1oUHHbrFs/705W</span><span class="se">\n</span><span class="s2">P+8dJ77p5gAaBpS/spCYLu/strU3uN06DTOh3neTcyDQrpIL5Zqs0Gl6/76m</span><span class="se">\n</span><span class="s2">OQFGi18khnwWPAyW4+uVcZiQmZU9M0tlWywwNlkVoKAwkFlwkYF07YZazfCY</span><span class="se">\n</span><span class="s2">MrAoQ6nusfjqjfU7HQeQKSCnMrBkzInsqan0PUm+UuGCMbxpQMdPA1de2nHB</span><span class="se">\n</span><span class="s2">eMs7OR7Pd5q5T93z240Iacjtwo/CV3Tcr1EyrfCcx05Jp4FKi9DPJf33asPx</span><span class="se">\n</span><span class="s2">oJ7J2XNa3QXqEbisMGT/b+6QZDm/LbfZXKuCIDYOjA==</span><span class="se">\n</span><span class="s2">&quot;</span>
</span></code></pre></td></tr></table></div></figure>


<p>This works for small messages but if you try and encrpt a string larget than your key&hellip; you&rsquo;ll hit an errors. You could break up the string into smaller chunks and encrypt each chunk individually.  But this is not secure.  This is what cypher block chaining is for.  Below is an example.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="n">cipher</span>      <span class="o">=</span> <span class="no">OpenSSL</span><span class="o">::</span><span class="no">Cipher</span><span class="o">.</span><span class="n">new</span> <span class="s1">&#39;AES-128-CBC&#39;</span>
</span><span class='line'><span class="n">cipher</span><span class="o">.</span><span class="n">encrypt</span>
</span><span class='line'><span class="n">iv</span>          <span class="o">=</span> <span class="n">cipher</span><span class="o">.</span><span class="n">random_iv</span>
</span><span class='line'><span class="n">pwd</span>         <span class="o">=</span> <span class="s1">&#39;tRiSsmiTp&#39;</span>
</span><span class='line'><span class="n">salt</span>        <span class="o">=</span> <span class="no">OpenSSL</span><span class="o">::</span><span class="no">Random</span><span class="o">.</span><span class="n">random_bytes</span> <span class="mi">16</span>
</span><span class='line'><span class="n">iter</span>        <span class="o">=</span> <span class="mi">20000</span>
</span><span class='line'><span class="n">key_len</span>     <span class="o">=</span> <span class="n">cipher</span><span class="o">.</span><span class="n">key_len</span>
</span><span class='line'><span class="n">digest</span>      <span class="o">=</span> <span class="no">OpenSSL</span><span class="o">::</span><span class="no">Digest</span><span class="o">::</span><span class="no">SHA256</span><span class="o">.</span><span class="n">new</span>
</span><span class='line'>
</span><span class='line'><span class="n">key</span> <span class="o">=</span> <span class="no">OpenSSL</span><span class="o">::</span><span class="no">PKCS5</span><span class="o">.</span><span class="n">pbkdf2_hmac</span><span class="p">(</span><span class="n">pwd</span><span class="p">,</span> <span class="n">salt</span><span class="p">,</span> <span class="n">iter</span><span class="p">,</span> <span class="n">key_len</span><span class="p">,</span> <span class="n">digest</span><span class="p">)</span>
</span><span class='line'><span class="n">cipher</span><span class="o">.</span><span class="n">key</span> <span class="o">=</span> <span class="n">key</span>
</span><span class='line'>
</span><span class='line'><span class="no">File</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="s2">&quot;enc-text.txt&quot;</span><span class="p">,</span><span class="s1">&#39;w&#39;</span><span class="p">)</span> <span class="k">do</span> <span class="o">|</span><span class="n">enc</span><span class="o">|</span>
</span><span class='line'>  <span class="no">File</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="s2">&quot;./plain.txt&quot;</span><span class="p">)</span> <span class="k">do</span> <span class="o">|</span><span class="n">f</span><span class="o">|</span>
</span><span class='line'>     <span class="kp">loop</span> <span class="k">do</span>
</span><span class='line'>       <span class="n">r</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">4096</span><span class="p">)</span>
</span><span class='line'>       <span class="k">break</span> <span class="k">unless</span> <span class="n">r</span>
</span><span class='line'>       <span class="n">enc</span> <span class="o">&lt;&lt;</span> <span class="n">cipher</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">r</span><span class="p">)</span>
</span><span class='line'>     <span class="k">end</span>
</span><span class='line'>     <span class="n">enc</span> <span class="o">&lt;&lt;</span> <span class="n">cipher</span><span class="o">.</span><span class="n">final</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<h3>Digital Signature</h3>

<p>Asymmetric digital signatures is a great way to verify integrity and authenticity of data. Create a keypair, send the public key to your receivers, and use this method to create a digital signature. By combining the data and the public key, you can verify that the signature was created by the owner of the private key.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="nb">require</span> <span class="s2">&quot;openssl&quot;</span>
</span><span class='line'>
</span><span class='line'><span class="n">data</span> <span class="o">=</span> <span class="s2">&quot;A small brown fox.&quot;</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="n">digest</span> <span class="o">=</span> <span class="no">OpenSSL</span><span class="o">::</span><span class="no">Digest</span><span class="o">::</span><span class="no">SHA256</span><span class="o">.</span><span class="n">new</span>
</span><span class='line'><span class="c1"># To list available digests:</span>
</span><span class='line'><span class="c1">#OpenSSL::Digest.constants</span>
</span><span class='line'>
</span><span class='line'><span class="n">signature</span> <span class="o">=</span> <span class="n">private_key</span><span class="o">.</span><span class="n">sign</span><span class="p">(</span><span class="n">digest</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'><span class="n">public_key</span><span class="o">.</span><span class="n">verify</span><span class="p">(</span><span class="n">digest</span><span class="p">,</span> <span class="n">signature</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span>
</span><span class='line'><span class="c1"># =&gt; true</span>
</span><span class='line'><span class="n">public_key</span><span class="o">.</span><span class="n">verify</span><span class="p">(</span><span class="n">digest</span><span class="p">,</span> <span class="n">signature</span><span class="p">,</span> <span class="n">data</span> <span class="o">+</span> <span class="s2">&quot;altered&quot;</span><span class="p">)</span>
</span><span class='line'><span class="c1"># =&gt; false</span>
</span><span class='line'><span class="n">public_key</span><span class="o">.</span><span class="n">verify</span><span class="p">(</span><span class="n">digest</span><span class="p">,</span> <span class="s2">&quot;altered&quot;</span> <span class="o">+</span> <span class="n">signature</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span>
</span><span class='line'><span class="c1"># =&gt; false</span>
</span></code></pre></td></tr></table></div></figure>


<h3>More</h3>

<p>Using openssl library directly we can encrypt a file.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>openssl aes-256-cbc -a -e -in <span class="nb">source</span>-file.txt -out enc-file.txt -k private_key
</span></code></pre></td></tr></table></div></figure>


<p>And to decrypt the file.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>openssl aes-256-cbc -d -a -in enc-file.txt -out unenc-file.txt -k private_key
</span></code></pre></td></tr></table></div></figure>


<p><a href="http://ruby-doc.org/stdlib-2.0/libdoc/openssl/rdoc/OpenSSL.html#label-PBKDF2+Password-based+Encryption">http://ruby-doc.org/stdlib-2.0/libdoc/openssl/rdoc/OpenSSL.html#label-PBKDF2+Password-based+Encryption</a></p>
</div>
  
  


        </article>
      
      
        <article>
          
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/02/21/ssh-config/">Ssh Config</a></h1>
    
    
      <p class="meta">

        <i class="fa fa-calendar-o"></i>
        




<time class='entry-date' datetime='2015-02-21T07:15:39-06:00'><span class='date'><span class='date-month'>Feb</span> <span class='date-day'>21</span><span class='date-suffix'>st</span>, <span class='date-year'>2015</span></span> <span class='time'>7:15 am</span></time>
        
      </p>
    
  </header>


<hr>


  <div class="entry-content"><p>I&rsquo;m in and out of servers all day.  One thing I&rsquo;ve found helpful is a ssh config file.  Create a file and place it <code>~/.ssh/config</code>.  You can add as many entries as you like.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>Host s3-rsync
</span><span class='line'>  HostName ec2-54-203-43-190.us-west-2.compute.amazonaws.com
</span><span class='line'>  User ec2-user
</span><span class='line'>  IdentityFile "~/.ssh/private-key-location"</span></code></pre></td></tr></table></div></figure>


<p><strong>Host:</strong> A friendly name/handle which you&rsquo;ll use.</p>

<p><strong>HostName:</strong> The remote server address you&rsquo;ll be connecting to.</p>

<p><strong>User:</strong> The user you want to connect as.</p>

<p><strong>IdentityFile:</strong> The private key to authenticate with.</p>

<p>Once its all setup you can connect by typing: <code>ssh s3-rsync</code></p>

<p>This is the same as: <code>ssh -i ~/.ssh/bs2-deploy ec2-user@ec2-54-203-43-190.us-west-2.compute.amazonaws.com</code>.</p>
</div>
  
  


        </article>
      
      
        <article>
          
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/02/11/rails-create-and-update/">Standard Rails Create Action</a></h1>
    
    
      <p class="meta">

        <i class="fa fa-calendar-o"></i>
        




<time class='entry-date' datetime='2015-02-11T15:43:24-06:00'><span class='date'><span class='date-month'>Feb</span> <span class='date-day'>11</span><span class='date-suffix'>th</span>, <span class='date-year'>2015</span></span> <span class='time'>3:43 pm</span></time>
        
      </p>
    
  </header>


<hr>


  <div class="entry-content"><p>Rails has taught me some really good best practices. Let&rsquo;s look at a default rails create action</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="k">def</span> <span class="nf">create</span>
</span><span class='line'>  <span class="vi">@post</span> <span class="o">=</span> <span class="no">Post</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="n">post_params</span><span class="p">)</span>
</span><span class='line'>  <span class="n">respond_to</span> <span class="k">do</span> <span class="o">|</span><span class="nb">format</span><span class="o">|</span>
</span><span class='line'>    <span class="k">if</span> <span class="vi">@post</span><span class="o">.</span><span class="n">save</span>
</span><span class='line'>      <span class="nb">format</span><span class="o">.</span><span class="n">html</span> <span class="p">{</span> <span class="n">redirect_to</span> <span class="vi">@post</span><span class="p">,</span> <span class="ss">notice</span><span class="p">:</span> <span class="s1">&#39;Post was successfully created.&#39;</span> <span class="p">}</span>
</span><span class='line'>    <span class="k">else</span>
</span><span class='line'>      <span class="nb">format</span><span class="o">.</span><span class="n">html</span> <span class="p">{</span> <span class="n">render</span> <span class="ss">:new</span> <span class="p">}</span>
</span><span class='line'>    <span class="k">end</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<p>I try not to deviate too much from this and nor should you. If <code>@post.save</code> returns true. return a 201 status code.  If <code>@post.save</code> returns false re-render the :new action.  So you can let the user fix the form.</p>

<p>Often I will see things like this.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="k">def</span> <span class="nf">create</span>
</span><span class='line'>  <span class="k">if</span> <span class="n">params</span><span class="o">[</span><span class="ss">:something</span><span class="o">]</span>
</span><span class='line'>    <span class="vi">@post</span> <span class="o">=</span> <span class="no">Post</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">post_params</span><span class="p">)</span>
</span><span class='line'>  <span class="k">else</span>
</span><span class='line'>    <span class="vi">@post</span> <span class="o">=</span> <span class="no">Post</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">other_params</span><span class="p">)</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'>  <span class="n">redirect_to</span> <span class="n">posts_path</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<p>At first glance this looks clean. But if you look closer. There is a subtle problem here. If the post object fails validation and fails to create, The action redirects to the index action where all new instaces are creating.  The @post object has lost any knowlege of the params and it will not get to oportunity to display the errors from the object.  You&rsquo;ll have to resort to things like <code>flash[:notice] = "@post.errors.full_messages.join()"</code>&hellip; ugh.</p>

<p>Active record gives us a nice interface for displaying errors on an object.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="k">class</span> <span class="nc">Post</span> <span class="o">&lt;</span> <span class="no">ActiveRecord</span><span class="o">::</span><span class="no">Base</span>
</span><span class='line'>  <span class="n">validates</span> <span class="ss">:title</span><span class="p">,</span> <span class="ss">presence</span><span class="p">:</span> <span class="kp">true</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>




<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="n">irb</span><span class="p">(</span><span class="n">main</span><span class="p">):</span><span class="mo">001</span><span class="p">:</span><span class="mi">0</span><span class="o">&gt;</span> <span class="nb">p</span> <span class="o">=</span> <span class="no">Post</span><span class="o">.</span><span class="n">new</span>
</span><span class='line'><span class="o">=&gt;</span> <span class="c1">#&lt;Post id: nil, title: nil, body: nil, created_at: nil, updated_at: nil&gt;</span>
</span><span class='line'><span class="n">irb</span><span class="p">(</span><span class="n">main</span><span class="p">):</span><span class="mo">002</span><span class="p">:</span><span class="mi">0</span><span class="o">&gt;</span> <span class="nb">p</span><span class="o">.</span><span class="n">valid?</span>
</span><span class='line'><span class="o">=&gt;</span> <span class="kp">false</span>
</span><span class='line'><span class="n">irb</span><span class="p">(</span><span class="n">main</span><span class="p">):</span><span class="mo">003</span><span class="p">:</span><span class="mi">0</span><span class="o">&gt;</span> <span class="nb">p</span><span class="o">.</span><span class="n">errors</span>
</span><span class='line'><span class="o">=&gt;</span> <span class="c1">#&lt;ActiveModel::Errors:0x007fe0ca9e4b68 @base=#&lt;Post id: nil, title: nil, body: nil, created_at: nil, updated_at: nil&gt;,</span>
</span><span class='line'><span class="vi">@messages</span><span class="o">=</span><span class="p">{</span><span class="ss">:title</span><span class="o">=&gt;[</span><span class="s2">&quot;can&#39;t be blank&quot;</span><span class="o">]</span><span class="p">}</span><span class="o">&gt;</span>
</span><span class='line'><span class="n">irb</span><span class="p">(</span><span class="n">main</span><span class="p">):</span><span class="mo">004</span><span class="p">:</span><span class="mi">0</span><span class="o">&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>When you call <code>@post.save</code> OR <code>@post.valid?</code> errors are added to the @post object so they can be displayed within the form.</p>

<p>Digging even deeper&hellip; Check out <a href="http://api.rubyonrails.org/classes/ActiveModel/Model.html">ActiveModel::Model</a>. It will give you this same object interface without needing database backed model.  Powerful stuff.</p>
</div>
  
  


        </article>
      
      
        <article>
          
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/02/10/angularjs/">Angularjs</a></h1>
    
    
      <p class="meta">

        <i class="fa fa-calendar-o"></i>
        




<time class='entry-date' datetime='2015-02-10T20:57:17-06:00'><span class='date'><span class='date-month'>Feb</span> <span class='date-day'>10</span><span class='date-suffix'>th</span>, <span class='date-year'>2015</span></span> <span class='time'>8:57 pm</span></time>
        
      </p>
    
  </header>


<hr>


  <div class="entry-content"><p><img class="img-responsive pull-left" src="/images/content/angularjs.png"></p>

<p>Lately I&rsquo;ve been writing a lot of angularjs.  At my work, we had a great debeate.. which client side framework should we use.  It came down to angularjs or ember. Ultimately, we choose angular.  I&rsquo;m happy we did.  Angularjs is awesome.  I would have been just as happy to settle with ember. Two way binding is a game changer.</p>

<p>Rails is great, BUT, I feel that, in any rails app, you end up creating interfaces that are a reflection of your database. Adding a client side framework, you&rsquo;re free to create interfaces that are decoupled from your backend.</p>
</div>
  
  


        </article>
      
      
        <article>
          
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/02/07/message-of-the-day/">Message of the Day</a></h1>
    
    
      <p class="meta">

        <i class="fa fa-calendar-o"></i>
        




<time class='entry-date' datetime='2015-02-07T10:23:44-06:00'><span class='date'><span class='date-month'>Feb</span> <span class='date-day'>7</span><span class='date-suffix'>th</span>, <span class='date-year'>2015</span></span> <span class='time'>10:23 am</span></time>
        
      </p>
    
  </header>


<hr>


  <div class="entry-content"><p>Lately I&rsquo;ve been doing a lot of server administration. It can be a lot of fun automating systems. One thing I&rsquo;ve found super valuable is to setup a &ldquo;message of the day&rdquo; file. This will display immediately after login and can be found in <code>/etc/motd</code>.  I like to put notes/documentation here. For example, I&rsquo;ll put in how to restart redis, how to tag a deploy, or the path to the app.</p>

<p><img class="img-responsive" src="/images/content/motd.png"></p>
</div>
  
  


        </article>
      
      <div class="pagination">
        
          <a class="prev" href="/posts/2">&larr; Older</a>
        
        <a href="/blog/archives">Blog Archives</a>
        
      </div>
    </div>


  </div>


  <div class="col-md-2">

      <aside class="sidebar">
        
          <section>
  <h1>Recent</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2017/01/08/run-remote-commands-over-ssh/">Run Remote Commands Over SSH!</a>
      </li>
    
      <li class="post">
        <a href="/blog/2016/08/25/cloudformation-apigateway-and-lambda/">Cloudformation ApiGateway and Lambda</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/08/15/dont-be-clever-stupid/">Don&#8217;t Be Clever Stupid</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/08/13/activemodel-model/">ActiveModel::Model</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/03/14/rails-configuration/">Rails Configuration</a>
      </li>
    
  </ul>
</section>

<section>

  <h1>GitHub <i class="fa fa-github"></i></h1>
  <ul id="gh_repos">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  
  <a href="https://github.com/tatums">@tatums</a> on GitHub
  
  <script type="text/javascript">
    $(document).ready(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'tatums',
            count: 3,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>

<!--
<aside>
  <h1>Flips</h1>
  <a data-flip-widget="mag" href="https://flipboard.com/@tatumszymczak/flips-rljc4lmcy">View my Flipboard Magazine.</a>
  <script src="https://cdn.flipboard.com/web/buttons/js/flbuttons.min.js" type="text/javascript"></script>
</aside>
&#8211;>




        
      </aside>

      <div class="ads">
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
          <!-- tatum.im-2 -->
          <ins class="adsbygoogle"
               style="display:block"
               data-ad-client="ca-pub-1566068962686971"
               data-ad-slot="6465518083"
               data-ad-format="auto"></ins>
          <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      </div>

  </div>
</div>



    </div>
  </div>
  <footer role="contentinfo">

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'tatumim';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>







</body>
</html>
