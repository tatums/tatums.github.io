<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Helping me remember...]]></title>
  <link href="http://tatums.github.io/atom.xml" rel="self"/>
  <link href="http://tatums.github.io/"/>
  <updated>2015-08-22T08:06:25-05:00</updated>
  <id>http://tatums.github.io/</id>
  <author>
    <name><![CDATA[Tatum Szymczak]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[Don't Be Clever Stupid]]></title>
    <link href="http://tatums.github.io/blog/2015/08/15/dont-be-clever-stupid/"/>
    <updated>2015-08-15T10:42:18-05:00</updated>
    <id>http://tatums.github.io/blog/2015/08/15/dont-be-clever-stupid</id>
    <content type="html"><![CDATA[<p>Everyone loves clever, right!?. Well, DONT! A clever solution is technical debt.</p>

<blockquote>
Any fool can write code that a computer can understand. 
Good programmers write code that humans can understand. â€“ Martin Fowler
</blockquote>


<p>So why do we do this? I belevie we enjoy knowing something that confuses others. It makes us feel smart. But please avoid this. Avoid this for your app, for your teamates, and for your future self.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[ActiveModel::Model]]></title>
    <link href="http://tatums.github.io/blog/2015/08/13/activemodel-model/"/>
    <updated>2015-08-13T19:37:30-05:00</updated>
    <id>http://tatums.github.io/blog/2015/08/13/activemodel-model</id>
    <content type="html"><![CDATA[<p>Rails 4 brought us <code>ActiveModel::Model</code>. It provides a light weight interface that&rsquo;s similar to an <code>ActiveRecord::Base</code> model.</p>

<p>for example, I can create a Person class like so.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="k">class</span> <span class="nc">Person</span>
</span><span class='line'>  <span class="kp">include</span> <span class="no">ActiveModel</span><span class="o">::</span><span class="no">Model</span>
</span><span class='line'>  <span class="kp">attr_accessor</span> <span class="ss">:name</span><span class="p">,</span> <span class="ss">:age</span>
</span><span class='line'>
</span><span class='line'>  <span class="n">validates</span> <span class="ss">:name</span><span class="p">,</span> <span class="kp">true</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">def</span> <span class="nf">save</span>
</span><span class='line'>    <span class="c1">## Do cool stuff here...</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>




<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="no">Loading</span> <span class="n">development</span> <span class="n">environment</span> <span class="p">(</span><span class="no">Rails</span> <span class="mi">4</span><span class="o">.</span><span class="mi">2</span><span class="o">.</span><span class="mi">1</span><span class="p">)</span>
</span><span class='line'><span class="n">irb</span><span class="p">(</span><span class="n">main</span><span class="p">):</span><span class="mo">001</span><span class="p">:</span><span class="mi">0</span><span class="o">&gt;</span> <span class="nb">p</span> <span class="o">=</span> <span class="no">Person</span><span class="o">.</span><span class="n">new</span> <span class="ss">age</span><span class="p">:</span> <span class="mi">21</span>
</span><span class='line'><span class="o">=&gt;</span> <span class="c1">#&lt;Person:0x007fc6367193b0 @age=21&gt;</span>
</span><span class='line'><span class="n">irb</span><span class="p">(</span><span class="n">main</span><span class="p">):</span><span class="mo">002</span><span class="p">:</span><span class="mi">0</span><span class="o">&gt;</span> <span class="nb">p</span><span class="o">.</span><span class="n">valid?</span>
</span><span class='line'><span class="o">=&gt;</span> <span class="kp">false</span>
</span><span class='line'><span class="n">irb</span><span class="p">(</span><span class="n">main</span><span class="p">):</span><span class="mo">003</span><span class="p">:</span><span class="mi">0</span><span class="o">&gt;</span> <span class="nb">p</span><span class="o">.</span><span class="n">errors</span>
</span><span class='line'><span class="o">=&gt;</span> <span class="c1">#&lt;ActiveModel::Errors:0x007fc638000a68 @base=#&lt;Person:0x007fc6367193b0 @age=21, @validation_context=nil, @errors=#&lt;ActiveModel::Errors:0x007fc638000a68 ...&gt;&gt;, @messages={:name=&gt;[&quot;can&#39;t be blank&quot;]}&gt;</span>
</span><span class='line'><span class="n">irb</span><span class="p">(</span><span class="n">main</span><span class="p">):</span><span class="mo">004</span><span class="p">:</span><span class="mi">0</span><span class="o">&gt;</span>
</span></code></pre></td></tr></table></div></figure>




<hr> </hr>


<p>This is great for instances where you don&rsquo;t need a full database backed Active Record model. I&rsquo;ve used them for form objects and in controllers where I have complex logic.</p>

<p>You can think of these as higher level abstractions above your ActiveRecord classes. Also, be conscious of the dependancy direction. An ActiveModel model can depend on an ActiveRecord model but your ActiveRecord models shouldn&rsquo;t depend on an ActiveModel model.</p>

<p><br />
Here&rsquo;s a more involved example.
Lets say I have 2 ActiveRecord classes <code>Org</code> and <code>User</code></p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="k">class</span> <span class="nc">Org</span> <span class="o">&lt;</span> <span class="no">ActiveRecord</span><span class="o">::</span><span class="no">Base</span>
</span><span class='line'>  <span class="n">validates</span> <span class="ss">:name</span><span class="p">,</span> <span class="ss">presence</span><span class="p">:</span> <span class="kp">true</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>




<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="k">class</span> <span class="nc">User</span> <span class="o">&lt;</span> <span class="no">ActiveRecord</span><span class="o">::</span><span class="no">Base</span>
</span><span class='line'>  <span class="n">validates</span> <span class="ss">:first</span><span class="p">,</span> <span class="ss">:last</span><span class="p">,</span> <span class="ss">presence</span><span class="p">:</span> <span class="kp">true</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<p>Now I&rsquo;ll create an ActiveModel model (non database)</p>

<p>Notice the validates_each method&hellip; Its going to check each of the ActiveRecord objects and let them raise up any errors to the Signup class.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="k">class</span> <span class="nc">Signup</span>
</span><span class='line'>  <span class="kp">include</span> <span class="no">ActiveModel</span><span class="o">::</span><span class="no">Model</span>
</span><span class='line'>  <span class="kp">attr_accessor</span> <span class="ss">:first</span><span class="p">,</span> <span class="ss">:last</span><span class="p">,</span> <span class="ss">:name</span>
</span><span class='line'>
</span><span class='line'>  <span class="n">validates_each</span> <span class="ss">:user</span><span class="p">,</span> <span class="ss">:org</span> <span class="k">do</span> <span class="o">|</span><span class="n">record</span><span class="p">,</span> <span class="kp">attr</span><span class="p">,</span> <span class="n">value</span><span class="o">|</span>
</span><span class='line'>    <span class="k">unless</span> <span class="n">value</span><span class="o">.</span><span class="n">valid?</span>
</span><span class='line'>      <span class="n">value</span><span class="o">.</span><span class="n">errors</span><span class="o">.</span><span class="n">each</span> <span class="p">{</span> <span class="o">|</span><span class="n">k</span><span class="p">,</span><span class="n">v</span><span class="o">|</span> <span class="n">record</span><span class="o">.</span><span class="n">errors</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">k</span><span class="o">.</span><span class="n">to_sym</span><span class="p">,</span> <span class="n">v</span><span class="p">)</span> <span class="p">}</span>
</span><span class='line'>    <span class="k">end</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>  <span class="c1">## must return boolean</span>
</span><span class='line'>  <span class="k">def</span> <span class="nf">save</span>
</span><span class='line'>    <span class="k">if</span> <span class="n">valid?</span>
</span><span class='line'>      <span class="n">org</span><span class="o">.</span><span class="n">save</span> <span class="o">&amp;&amp;</span> <span class="n">user</span><span class="o">.</span><span class="n">save</span>
</span><span class='line'>    <span class="k">else</span>
</span><span class='line'>      <span class="kp">false</span>
</span><span class='line'>    <span class="k">end</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>  <span class="kp">private</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">def</span> <span class="nf">org</span>
</span><span class='line'>      <span class="vi">@org</span> <span class="o">||=</span> <span class="no">Org</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="nb">name</span><span class="p">:</span> <span class="nb">name</span><span class="p">)</span>
</span><span class='line'>    <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">def</span> <span class="nf">user</span>
</span><span class='line'>      <span class="vi">@user</span> <span class="o">||=</span> <span class="no">User</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="ss">first</span><span class="p">:</span> <span class="n">first</span><span class="p">,</span> <span class="ss">last</span><span class="p">:</span> <span class="n">last</span><span class="p">)</span>
</span><span class='line'>    <span class="k">end</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<p>Awesome right!!</p>

<p>So why do all this?  Well, the single responsibilty states that every class should have responsibility over a single part of the functionality provided by the software, and that responsibility should be entirely encapsulated by the class.  ActiveRecord is responsible for persistence to the database. This will keep our classes with a narrow focus and allow us to refactor and create more use cases in the future. I think it&rsquo;s a win.  I find this strategy is generally good for one directional workflows such as signup or in a shopping app cart checkout.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Rails Configuration]]></title>
    <link href="http://tatums.github.io/blog/2015/03/14/rails-configuration/"/>
    <updated>2015-03-14T10:25:26-05:00</updated>
    <id>http://tatums.github.io/blog/2015/03/14/rails-configuration</id>
    <content type="html"><![CDATA[<p>Occasionally I&rsquo;ll see things like this in a code base.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="k">def</span> <span class="nf">api_host</span>
</span><span class='line'>  <span class="k">if</span> <span class="no">Rails</span><span class="o">.</span><span class="n">production?</span>
</span><span class='line'>    <span class="s2">&quot;http://prod.fake.api.url&quot;</span>
</span><span class='line'>  <span class="k">else</span>
</span><span class='line'>    <span class="s2">&quot;http://stag.fake.api.url&quot;</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<p>I try to avoid writting methods like this.  Rails provides a nice way to set environment specific variables.</p>

<p><a href="http://guides.rubyonrails.org/configuring.html#custom-configuration">http://guides.rubyonrails.org/configuring.html#custom-configuration</a></p>

<p><code>config/environments/staging.rb</code></p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="n">config</span><span class="o">.</span><span class="n">api_host</span> <span class="o">=</span> <span class="s2">&quot;http://stag.fake.api.url&quot;</span>
</span></code></pre></td></tr></table></div></figure>


<p><code>config/environments/production.rb</code></p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="n">config</span><span class="o">.</span><span class="n">api_host</span> <span class="o">=</span> <span class="s2">&quot;http://prod.fake.api.url&quot;</span>
</span></code></pre></td></tr></table></div></figure>


<p>So now you can refactor the method to this.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="k">def</span> <span class="nf">api_host</span>
</span><span class='line'>  <span class="no">Rails</span><span class="o">.</span><span class="n">configuration</span><span class="o">.</span><span class="n">api_host</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>



]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Crypto]]></title>
    <link href="http://tatums.github.io/blog/2015/02/28/crypto/"/>
    <updated>2015-02-28T16:05:01-06:00</updated>
    <id>http://tatums.github.io/blog/2015/02/28/crypto</id>
    <content type="html"><![CDATA[<p>I&rsquo;ve been playing around with Public-key cryptography or asymmetric cryptography. With revaltions from Eric Snowden on programs like PRISM, I feel that encryption is more important than ever.</p>

<p><em>From Wikipedia</em>
<a href="http://en.wikipedia.org/wiki/Public-key_cryptography">
  <blockquote>
  Public-key cryptography is a class of cryptographic algorithms which requires two separate keys, one of which is secret (or private) and one of which is public. Although different, the two parts of this key pair are mathematically linked. The public key is used to encrypt plaintext or to verify a digital signature; whereas the private key is used to decrypt ciphertext or to create a digital signature.
  </blockquote>
</a></p>

<p>There are two main uses for public key crypto.</p>

<ol>
<li><p>Public key encryption.  A message is encrypted with a recipient&rsquo;s public key. The message can only be unencrypted by the holder of the private key.</p></li>
<li><p>Digital Signature.  A message is signed with a the senders private key to generate a cryptographic hash. Using the public key, one can verify the message was indeed sent with the coresponding private key and can ensure the message has not been altered.</p></li>
</ol>


<h3>Keys</h3>

<p>First, let&rsquo;s generate some keys. From the private key we will also generate the public key.  Remember the private and public key are mathematically linked.  This is important.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="o">[</span><span class="mi">1</span><span class="o">]</span> <span class="n">pry</span><span class="p">(</span><span class="n">main</span><span class="p">)</span><span class="o">&gt;</span> <span class="nb">require</span> <span class="s2">&quot;openssl&quot;</span>
</span><span class='line'><span class="o">=&gt;</span> <span class="kp">true</span>
</span><span class='line'><span class="o">[</span><span class="mi">2</span><span class="o">]</span> <span class="n">pry</span><span class="p">(</span><span class="n">main</span><span class="p">)</span><span class="o">&gt;</span> <span class="n">private_key</span> <span class="o">=</span> <span class="no">OpenSSL</span><span class="o">::</span><span class="no">PKey</span><span class="o">::</span><span class="no">RSA</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="mi">2048</span><span class="p">)</span>
</span><span class='line'><span class="o">=&gt;</span> <span class="c1">#&lt;OpenSSL::PKey::RSA:0x007ff03b379c30&gt;</span>
</span><span class='line'><span class="o">[</span><span class="mi">3</span><span class="o">]</span> <span class="n">pry</span><span class="p">(</span><span class="n">main</span><span class="p">)</span><span class="o">&gt;</span> <span class="n">public_key</span> <span class="o">=</span> <span class="n">private_key</span><span class="o">.</span><span class="n">public_key</span>
</span><span class='line'><span class="o">=&gt;</span> <span class="c1">#&lt;OpenSSL::PKey::RSA:0x007ff03c3330b8&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>Great.  Now we have a key pair.  We can write these keys to disk if we like.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="c1">## write the private key to disk.</span>
</span><span class='line'><span class="no">File</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="s2">&quot;~/.ssh/private_key&quot;</span><span class="p">,</span> <span class="s2">&quot;w+&quot;</span><span class="p">)</span> <span class="k">do</span> <span class="o">|</span><span class="n">f</span><span class="o">|</span>
</span><span class='line'>  <span class="n">f</span><span class="o">.</span><span class="n">write</span> <span class="n">private_key</span><span class="o">.</span><span class="n">to_pem</span>
</span><span class='line'><span class="k">end</span>
</span><span class='line'><span class="c1"># write the public key to disk.</span>
</span><span class='line'><span class="no">File</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="s2">&quot;~/.ssh/public_key.pem&quot;</span><span class="p">,</span> <span class="s2">&quot;w+&quot;</span><span class="p">)</span> <span class="k">do</span> <span class="o">|</span><span class="n">f</span><span class="o">|</span>
</span><span class='line'>  <span class="n">f</span><span class="o">.</span><span class="n">write</span> <span class="n">public_key</span><span class="o">.</span><span class="n">to_pem</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<p>We can read the key in from key like so.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="n">key</span> <span class="o">=</span> <span class="no">OpenSSL</span><span class="o">::</span><span class="no">PKey</span><span class="o">::</span><span class="no">RSA</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="no">File</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="s2">&quot;~/.ssh/private_key&quot;</span><span class="p">))</span>
</span></code></pre></td></tr></table></div></figure>


<h3>Public key enctryption</h3>

<p>We&rsquo;ll be encrypting a message with the public key. So it can only be unenctrypted by the owner of the private key.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="c1">## Use the public key to encrypt a message</span>
</span><span class='line'><span class="o">[</span><span class="mi">4</span><span class="o">]</span> <span class="n">pry</span><span class="p">(</span><span class="n">main</span><span class="p">)</span><span class="o">&gt;</span> <span class="n">encrypted_data</span> <span class="o">=</span> <span class="n">public_key</span><span class="o">.</span><span class="n">public_encrypt</span><span class="p">(</span><span class="s2">&quot;Some private data is here.&quot;</span><span class="p">)</span>
</span><span class='line'><span class="o">=&gt;</span> <span class="s2">&quot;</span><span class="se">\x9B\f\xD2\&quot;\x02</span><span class="s2">l</span><span class="se">\x0E\xFB\x18\xFA\xA2\xCC</span><span class="s2">;</span><span class="se">\x9F\xC2</span><span class="s2">r</span><span class="se">\xFA\x88\x94\\\xDB</span><span class="s2">ZY</span><span class="se">\x96</span><span class="s2">4</span><span class="se">\xE3\x13</span><span class="s2">i</span><span class="se">\xDB\xB5\xB4</span><span class="s2">&lt;</span><span class="se">\x8E\xEC\xB8\xAB\&quot;</span><span class="s2">a</span><span class="se">\xE1\xE0\x01\x8C</span><span class="s2">b</span><span class="se">\xEC\xAE\x86\xC0</span><span class="s2">!</span><span class="se">\x18\xC8\xA9\xDE</span><span class="s2">B</span><span class="se">\e</span><span class="s2">^</span><span class="se">\xCC</span><span class="s2">e</span><span class="se">\x11\xDC\x19\x81\xDC\x98\x1E</span><span class="s2">X</span><span class="se">\x11\xD6\&quot;</span><span class="s2">bUJ</span><span class="se">\xB0</span><span class="s2">B</span><span class="se">\xED\x96\x03\x9F</span><span class="s2">}</span><span class="se">\xF7</span><span class="s2">I</span><span class="se">\xFD\x9F\x04\x04\xF4</span><span class="s2">Q</span><span class="se">\xA7</span><span class="s2">H</span><span class="se">\x9C\b\xC5\a\xE1\xA4\x02</span><span class="s2">kx</span><span class="se">\xF4</span><span class="s2">6A% </span><span class="se">\xEB\xEB</span><span class="s2">: </span><span class="se">\xD1\xA2\xFF\xA4</span><span class="s2">$</span><span class="se">\xBD</span><span class="s2">P</span><span class="se">\x9F</span><span class="s2">R</span><span class="se">\xE9\xD3\x9F\r</span><span class="s2">&gt;</span><span class="se">\x8E</span><span class="s2">5</span><span class="se">\xD9\x10\xE8\x9D</span><span class="s2">Yd</span><span class="se">\e</span><span class="s2">`</span><span class="se">\x8E\xE0\xBD\xE5\\\x02\xF6\x83\v\x15\xD4</span><span class="s2">m</span><span class="se">\x03\xCD</span><span class="s2">J</span><span class="se">\x9A</span><span class="s2">*</span><span class="se">\xA6\xF5</span><span class="s2">S9</span><span class="se">\xD2</span><span class="s2">M</span><span class="se">\x10\xD5</span><span class="s2"> 7</span><span class="se">\x92\xCE\xF0\xB9</span><span class="s2">&lt;</span><span class="se">\xAF</span><span class="s2">e</span><span class="se">\x9A\xAE\x8E</span><span class="s2">`</span><span class="se">\xAD</span><span class="s2">W</span><span class="se">\x93\x91</span><span class="s2">;HZ</span><span class="se">\xEB\xD8\xFF\xDE\x02\x10</span><span class="s2">m</span><span class="se">\x9D\xF2</span><span class="s2">*</span><span class="se">\t</span><span class="s2">L2</span><span class="se">\xE2</span><span class="s2">`K</span><span class="se">\xC8\x0E</span><span class="s2">)O</span><span class="se">\x86\xDA\xAF</span><span class="s2">k4</span><span class="se">\xD0\r</span><span class="s2">N</span><span class="se">\xF3</span><span class="s2">%}</span><span class="se">\xEA</span><span class="s2">M</span><span class="se">\x15</span><span class="s2">he</span><span class="se">\xDF\x0F\xC6\xE5\xAA</span><span class="s2">$</span><span class="se">\x19\x03</span><span class="s2">V</span><span class="se">\xBE\x0E</span><span class="s2">~</span><span class="se">\x8E</span><span class="s2">Lv</span><span class="se">\x9C\xC7\xB4</span><span class="s2">o</span><span class="se">\xA1</span><span class="s2">3</span><span class="se">\xE2\xDE\xE2</span><span class="s2">t!]-</span><span class="se">\xC8\x88\xAF\xE3\xD5\xFD</span><span class="s2">`T</span><span class="se">\xD9\xCD</span><span class="s2">s</span><span class="se">\xFF\xAE</span><span class="s2">(&lt;</span><span class="se">\xBD\xB9</span><span class="s2">&quot;</span>
</span></code></pre></td></tr></table></div></figure>


<p>This will result in some unreadable binary data. Next we&rsquo;ll decrypt this data with the private key.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="c1">## Use the private key to decrypt</span>
</span><span class='line'><span class="o">[</span><span class="mi">5</span><span class="o">]</span> <span class="n">pry</span><span class="p">(</span><span class="n">main</span><span class="p">)</span><span class="o">&gt;</span> <span class="n">private_key</span><span class="o">.</span><span class="n">private_decrypt</span><span class="p">(</span><span class="n">enc</span><span class="p">)</span>
</span><span class='line'><span class="o">=&gt;</span> <span class="s2">&quot;Some private data is here.&quot;</span>
</span></code></pre></td></tr></table></div></figure>


<p>Nice!</p>

<p>The public key can encrypt but cannot decrypt the message. This enctryption only works in one direction. Only the private key can decrypt that message. You can also encrypt messages with a private key. Those messages can be unenctrypted with the public key and the private key.</p>

<p>Asymmetric public/private key encryption is slow and victim to attack in cases where it is used without padding or directly to encrypt larger chunks of data. Typical use cases for RSA encryption involve &ldquo;wrapping&rdquo; a symmetric key with the public key of the recipient who would &ldquo;unwrap&rdquo; that symmetric key again using their private key.</p>

<p>NOTE - The enctrypted messages are in binary format. If we want to encode the data for transmission accoss the net, we&rsquo;ll want to use something like base64.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="o">[</span><span class="mi">6</span><span class="o">]</span> <span class="n">pry</span><span class="p">(</span><span class="n">main</span><span class="p">)</span><span class="o">&gt;</span> <span class="nb">require</span> <span class="s2">&quot;base64&quot;</span>
</span><span class='line'><span class="o">=&gt;</span> <span class="kp">true</span>
</span><span class='line'><span class="o">[</span><span class="mi">7</span><span class="o">]</span> <span class="n">pry</span><span class="p">(</span><span class="n">main</span><span class="p">)</span><span class="o">&gt;</span> <span class="n">enc_string</span> <span class="o">=</span> <span class="no">Base64</span><span class="o">.</span><span class="n">encode64</span><span class="p">(</span><span class="n">encrypted</span><span class="p">)</span>
</span><span class='line'><span class="o">=&gt;</span> <span class="s2">&quot;iRBt6WHFYP2sn2Qv+qs16js/EJqBGaTWyxUH7iI/aj3UEw1oUHHbrFs/705W</span><span class="se">\n</span><span class="s2">P+8dJ77p5gAaBpS/spCYLu/strU3uN06DTOh3neTcyDQrpIL5Zqs0Gl6/76m</span><span class="se">\n</span><span class="s2">OQFGi18khnwWPAyW4+uVcZiQmZU9M0tlWywwNlkVoKAwkFlwkYF07YZazfCY</span><span class="se">\n</span><span class="s2">MrAoQ6nusfjqjfU7HQeQKSCnMrBkzInsqan0PUm+UuGCMbxpQMdPA1de2nHB</span><span class="se">\n</span><span class="s2">eMs7OR7Pd5q5T93z240Iacjtwo/CV3Tcr1EyrfCcx05Jp4FKi9DPJf33asPx</span><span class="se">\n</span><span class="s2">oJ7J2XNa3QXqEbisMGT/b+6QZDm/LbfZXKuCIDYOjA==</span><span class="se">\n</span><span class="s2">&quot;</span>
</span></code></pre></td></tr></table></div></figure>


<p>This works for small messages but if you try and encrpt a string larget than your key&hellip; you&rsquo;ll hit an errors. You could break up the string into smaller chunks and encrypt each chunk individually.  But this is not secure.  This is what cypher block chaining is for.  Below is an example.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="n">cipher</span>      <span class="o">=</span> <span class="no">OpenSSL</span><span class="o">::</span><span class="no">Cipher</span><span class="o">.</span><span class="n">new</span> <span class="s1">&#39;AES-128-CBC&#39;</span>
</span><span class='line'><span class="n">cipher</span><span class="o">.</span><span class="n">encrypt</span>
</span><span class='line'><span class="n">iv</span>          <span class="o">=</span> <span class="n">cipher</span><span class="o">.</span><span class="n">random_iv</span>
</span><span class='line'><span class="n">pwd</span>         <span class="o">=</span> <span class="s1">&#39;tRiSsmiTp&#39;</span>
</span><span class='line'><span class="n">salt</span>        <span class="o">=</span> <span class="no">OpenSSL</span><span class="o">::</span><span class="no">Random</span><span class="o">.</span><span class="n">random_bytes</span> <span class="mi">16</span>
</span><span class='line'><span class="n">iter</span>        <span class="o">=</span> <span class="mi">20000</span>
</span><span class='line'><span class="n">key_len</span>     <span class="o">=</span> <span class="n">cipher</span><span class="o">.</span><span class="n">key_len</span>
</span><span class='line'><span class="n">digest</span>      <span class="o">=</span> <span class="no">OpenSSL</span><span class="o">::</span><span class="no">Digest</span><span class="o">::</span><span class="no">SHA256</span><span class="o">.</span><span class="n">new</span>
</span><span class='line'>
</span><span class='line'><span class="n">key</span> <span class="o">=</span> <span class="no">OpenSSL</span><span class="o">::</span><span class="no">PKCS5</span><span class="o">.</span><span class="n">pbkdf2_hmac</span><span class="p">(</span><span class="n">pwd</span><span class="p">,</span> <span class="n">salt</span><span class="p">,</span> <span class="n">iter</span><span class="p">,</span> <span class="n">key_len</span><span class="p">,</span> <span class="n">digest</span><span class="p">)</span>
</span><span class='line'><span class="n">cipher</span><span class="o">.</span><span class="n">key</span> <span class="o">=</span> <span class="n">key</span>
</span><span class='line'>
</span><span class='line'><span class="no">File</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="s2">&quot;enc-text.txt&quot;</span><span class="p">,</span><span class="s1">&#39;w&#39;</span><span class="p">)</span> <span class="k">do</span> <span class="o">|</span><span class="n">enc</span><span class="o">|</span>
</span><span class='line'>  <span class="no">File</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="s2">&quot;./plain.txt&quot;</span><span class="p">)</span> <span class="k">do</span> <span class="o">|</span><span class="n">f</span><span class="o">|</span>
</span><span class='line'>     <span class="kp">loop</span> <span class="k">do</span>
</span><span class='line'>       <span class="n">r</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">4096</span><span class="p">)</span>
</span><span class='line'>       <span class="k">break</span> <span class="k">unless</span> <span class="n">r</span>
</span><span class='line'>       <span class="n">enc</span> <span class="o">&lt;&lt;</span> <span class="n">cipher</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">r</span><span class="p">)</span>
</span><span class='line'>     <span class="k">end</span>
</span><span class='line'>     <span class="n">enc</span> <span class="o">&lt;&lt;</span> <span class="n">cipher</span><span class="o">.</span><span class="n">final</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<h3>Digital Signature</h3>

<p>Asymmetric digital signatures is a great way to verify integrity and authenticity of data. Create a keypair, send the public key to your receivers, and use this method to create a digital signature. By combining the data and the public key, you can verify that the signature was created by the owner of the private key.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="nb">require</span> <span class="s2">&quot;openssl&quot;</span>
</span><span class='line'>
</span><span class='line'><span class="n">data</span> <span class="o">=</span> <span class="s2">&quot;A small brown fox.&quot;</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="n">digest</span> <span class="o">=</span> <span class="no">OpenSSL</span><span class="o">::</span><span class="no">Digest</span><span class="o">::</span><span class="no">SHA256</span><span class="o">.</span><span class="n">new</span>
</span><span class='line'><span class="c1"># To list available digests:</span>
</span><span class='line'><span class="c1">#OpenSSL::Digest.constants</span>
</span><span class='line'>
</span><span class='line'><span class="n">signature</span> <span class="o">=</span> <span class="n">private_key</span><span class="o">.</span><span class="n">sign</span><span class="p">(</span><span class="n">digest</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'><span class="n">public_key</span><span class="o">.</span><span class="n">verify</span><span class="p">(</span><span class="n">digest</span><span class="p">,</span> <span class="n">signature</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span>
</span><span class='line'><span class="c1"># =&gt; true</span>
</span><span class='line'><span class="n">public_key</span><span class="o">.</span><span class="n">verify</span><span class="p">(</span><span class="n">digest</span><span class="p">,</span> <span class="n">signature</span><span class="p">,</span> <span class="n">data</span> <span class="o">+</span> <span class="s2">&quot;altered&quot;</span><span class="p">)</span>
</span><span class='line'><span class="c1"># =&gt; false</span>
</span><span class='line'><span class="n">public_key</span><span class="o">.</span><span class="n">verify</span><span class="p">(</span><span class="n">digest</span><span class="p">,</span> <span class="s2">&quot;altered&quot;</span> <span class="o">+</span> <span class="n">signature</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span>
</span><span class='line'><span class="c1"># =&gt; false</span>
</span></code></pre></td></tr></table></div></figure>


<h3>More</h3>

<p>Using openssl library directly we can encrypt a file.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>openssl aes-256-cbc -a -e -in <span class="nb">source</span>-file.txt -out enc-file.txt -k private_key
</span></code></pre></td></tr></table></div></figure>


<p>And to decrypt the file.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>openssl aes-256-cbc -d -a -in enc-file.txt -out unenc-file.txt -k private_key
</span></code></pre></td></tr></table></div></figure>


<p><a href="http://ruby-doc.org/stdlib-2.0/libdoc/openssl/rdoc/OpenSSL.html#label-PBKDF2+Password-based+Encryption">http://ruby-doc.org/stdlib-2.0/libdoc/openssl/rdoc/OpenSSL.html#label-PBKDF2+Password-based+Encryption</a></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Ssh Config]]></title>
    <link href="http://tatums.github.io/blog/2015/02/21/ssh-config/"/>
    <updated>2015-02-21T07:15:39-06:00</updated>
    <id>http://tatums.github.io/blog/2015/02/21/ssh-config</id>
    <content type="html"><![CDATA[<p>I&rsquo;m in and out of servers all day.  One thing I&rsquo;ve found helpful is a ssh config file.  Create a file and place it <code>~/.ssh/config</code>.  You can add as many entries as you like.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>Host s3-rsync
</span><span class='line'>  HostName ec2-54-203-43-190.us-west-2.compute.amazonaws.com
</span><span class='line'>  User ec2-user
</span><span class='line'>  IdentityFile "~/.ssh/private-key-location"</span></code></pre></td></tr></table></div></figure>


<p><strong>Host:</strong> A friendly name/handle which you&rsquo;ll use.</p>

<p><strong>HostName:</strong> The remote server address you&rsquo;ll be connecting to.</p>

<p><strong>User:</strong> The user you want to connect as.</p>

<p><strong>IdentityFile:</strong> The private key to authenticate with.</p>

<p>Once its all setup you can connect by typing: <code>ssh s3-rsync</code></p>

<p>This is the same as: <code>ssh -i ~/.ssh/bs2-deploy ec2-user@ec2-54-203-43-190.us-west-2.compute.amazonaws.com</code>.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Standard Rails Create Action]]></title>
    <link href="http://tatums.github.io/blog/2015/02/11/rails-create-and-update/"/>
    <updated>2015-02-11T15:43:24-06:00</updated>
    <id>http://tatums.github.io/blog/2015/02/11/rails-create-and-update</id>
    <content type="html"><![CDATA[<p>Rails has taught me some really good best practices. Let&rsquo;s look at a default rails create action</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="k">def</span> <span class="nf">create</span>
</span><span class='line'>  <span class="vi">@post</span> <span class="o">=</span> <span class="no">Post</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="n">post_params</span><span class="p">)</span>
</span><span class='line'>  <span class="n">respond_to</span> <span class="k">do</span> <span class="o">|</span><span class="nb">format</span><span class="o">|</span>
</span><span class='line'>    <span class="k">if</span> <span class="vi">@post</span><span class="o">.</span><span class="n">save</span>
</span><span class='line'>      <span class="nb">format</span><span class="o">.</span><span class="n">html</span> <span class="p">{</span> <span class="n">redirect_to</span> <span class="vi">@post</span><span class="p">,</span> <span class="ss">notice</span><span class="p">:</span> <span class="s1">&#39;Post was successfully created.&#39;</span> <span class="p">}</span>
</span><span class='line'>    <span class="k">else</span>
</span><span class='line'>      <span class="nb">format</span><span class="o">.</span><span class="n">html</span> <span class="p">{</span> <span class="n">render</span> <span class="ss">:new</span> <span class="p">}</span>
</span><span class='line'>    <span class="k">end</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<p>I try not to deviate too much from this and nor should you. If <code>@post.save</code> returns true. return a 201 status code.  If <code>@post.save</code> returns false re-render the :new action.  So you can let the user fix the form.</p>

<p>Often I will see things like this.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="k">def</span> <span class="nf">create</span>
</span><span class='line'>  <span class="k">if</span> <span class="n">params</span><span class="o">[</span><span class="ss">:something</span><span class="o">]</span>
</span><span class='line'>    <span class="vi">@post</span> <span class="o">=</span> <span class="no">Post</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">post_params</span><span class="p">)</span>
</span><span class='line'>  <span class="k">else</span>
</span><span class='line'>    <span class="vi">@post</span> <span class="o">=</span> <span class="no">Post</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">other_params</span><span class="p">)</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'>  <span class="n">redirect_to</span> <span class="n">posts_path</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<p>At first glance this looks clean. But if you look closer. There is a subtle problem here. If the post object fails validation and fails to create, The action redirects to the index action where all new instaces are creating.  The @post object has lost any knowlege of the params and it will not get to oportunity to display the errors from the object.  You&rsquo;ll have to resort to things like <code>flash[:notice] = "@post.errors.full_messages.join()"</code>&hellip; ugh.</p>

<p>Active record gives us a nice interface for displaying errors on an object.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="k">class</span> <span class="nc">Post</span> <span class="o">&lt;</span> <span class="no">ActiveRecord</span><span class="o">::</span><span class="no">Base</span>
</span><span class='line'>  <span class="n">validates</span> <span class="ss">:title</span><span class="p">,</span> <span class="ss">presence</span><span class="p">:</span> <span class="kp">true</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>




<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="n">irb</span><span class="p">(</span><span class="n">main</span><span class="p">):</span><span class="mo">001</span><span class="p">:</span><span class="mi">0</span><span class="o">&gt;</span> <span class="nb">p</span> <span class="o">=</span> <span class="no">Post</span><span class="o">.</span><span class="n">new</span>
</span><span class='line'><span class="o">=&gt;</span> <span class="c1">#&lt;Post id: nil, title: nil, body: nil, created_at: nil, updated_at: nil&gt;</span>
</span><span class='line'><span class="n">irb</span><span class="p">(</span><span class="n">main</span><span class="p">):</span><span class="mo">002</span><span class="p">:</span><span class="mi">0</span><span class="o">&gt;</span> <span class="nb">p</span><span class="o">.</span><span class="n">valid?</span>
</span><span class='line'><span class="o">=&gt;</span> <span class="kp">false</span>
</span><span class='line'><span class="n">irb</span><span class="p">(</span><span class="n">main</span><span class="p">):</span><span class="mo">003</span><span class="p">:</span><span class="mi">0</span><span class="o">&gt;</span> <span class="nb">p</span><span class="o">.</span><span class="n">errors</span>
</span><span class='line'><span class="o">=&gt;</span> <span class="c1">#&lt;ActiveModel::Errors:0x007fe0ca9e4b68 @base=#&lt;Post id: nil, title: nil, body: nil, created_at: nil, updated_at: nil&gt;,</span>
</span><span class='line'><span class="vi">@messages</span><span class="o">=</span><span class="p">{</span><span class="ss">:title</span><span class="o">=&gt;[</span><span class="s2">&quot;can&#39;t be blank&quot;</span><span class="o">]</span><span class="p">}</span><span class="o">&gt;</span>
</span><span class='line'><span class="n">irb</span><span class="p">(</span><span class="n">main</span><span class="p">):</span><span class="mo">004</span><span class="p">:</span><span class="mi">0</span><span class="o">&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>When you call <code>@post.save</code> OR <code>@post.valid?</code> errors are added to the @post object so they can be displayed within the form.</p>

<p>Digging even deeper&hellip; Check out <a href="http://api.rubyonrails.org/classes/ActiveModel/Model.html">ActiveModel::Model</a>. It will give you this same object interface without needing database backed model.  Powerful stuff.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Angularjs]]></title>
    <link href="http://tatums.github.io/blog/2015/02/10/angularjs/"/>
    <updated>2015-02-10T20:57:17-06:00</updated>
    <id>http://tatums.github.io/blog/2015/02/10/angularjs</id>
    <content type="html"><![CDATA[<p><img class="img-responsive pull-left" src="http://tatums.github.io/images/content/angularjs.png"></p>

<p>Lately I&rsquo;ve been writing a lot of angularjs.  At my work, we had a great debeate.. which client side framework should we use.  It came down to angularjs or ember. Ultimately, we choose angular.  I&rsquo;m happy we did.  Angularjs is awesome.  I would have been just as happy to settle with ember. Two way binding is a game changer.</p>

<p>Rails is great, BUT, I feel that, in any rails app, you end up creating interfaces that are a reflection of your database. Adding a client side framework, you&rsquo;re free to create interfaces that are decoupled from your backend.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Message of the Day]]></title>
    <link href="http://tatums.github.io/blog/2015/02/07/message-of-the-day/"/>
    <updated>2015-02-07T10:23:44-06:00</updated>
    <id>http://tatums.github.io/blog/2015/02/07/message-of-the-day</id>
    <content type="html"><![CDATA[<p>Lately I&rsquo;ve been doing a lot of server administration. It can be a lot of fun automating systems. One thing I&rsquo;ve found super valuable is to setup a &ldquo;message of the day&rdquo; file. This will display immediately after login and can be found in <code>/etc/motd</code>.  I like to put notes/documentation here. For example, I&rsquo;ll put in how to restart redis, how to tag a deploy, or the path to the app.</p>

<p><img class="img-responsive" src="http://tatums.github.io/images/content/motd.png"></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Hosting a Static Site on an S3 Bucket]]></title>
    <link href="http://tatums.github.io/blog/2015/02/07/hosting-a-static-site-on-an-s3-bucket/"/>
    <updated>2015-02-07T06:33:56-06:00</updated>
    <id>http://tatums.github.io/blog/2015/02/07/hosting-a-static-site-on-an-s3-bucket</id>
    <content type="html"><![CDATA[<p>I love the recent shift from dynamic sites to static sites. This doesn&rsquo;t work for all sites. But why have a blog that gets dynamically build on each request.  It&rsquo;s Not needed.</p>

<p>Amazon will host static sites on an S3 bucket and its dead simple. Awesome!</p>

<ol>
<li>Create a bucket and set as public host.</li>
<li>Upload files and make them public.</li>
<li>Profit.</li>
</ol>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Migrate a Single Database Migration]]></title>
    <link href="http://tatums.github.io/blog/2013/01/21/migrate-a-single-database-migration/"/>
    <updated>2013-01-21T08:43:00-06:00</updated>
    <id>http://tatums.github.io/blog/2013/01/21/migrate-a-single-database-migration</id>
    <content type="html"><![CDATA[<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="n">rails</span> <span class="n">console</span>
</span><span class='line'><span class="nb">require</span> <span class="s2">&quot;db/migrate/20121130134444_add_column_backorder_to_orders.rb&quot;</span>
</span><span class='line'><span class="no">AddColumnBackorderToOrders</span><span class="o">.</span><span class="n">up</span>
</span></code></pre></td></tr></table></div></figure>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Convert a Date String to Ruby Date]]></title>
    <link href="http://tatums.github.io/blog/2013/01/15/convert-a-date-string-to-ruby-date/"/>
    <updated>2013-01-15T08:54:26-06:00</updated>
    <id>http://tatums.github.io/blog/2013/01/15/convert-a-date-string-to-ruby-date</id>
    <content type="html"><![CDATA[<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="no">Date</span><span class="o">.</span><span class="n">parse</span> <span class="s1">&#39;2013/1/15&#39;</span>
</span><span class='line'>
</span><span class='line'><span class="no">DateTime</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="s1">&#39;2013/1/15&#39;</span><span class="o">+</span><span class="s1">&#39;-23:59:59-6:00&#39;</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Form Helper From Console]]></title>
    <link href="http://tatums.github.io/blog/2013/01/14/form-helper-from-console/"/>
    <updated>2013-01-14T09:00:54-06:00</updated>
    <id>http://tatums.github.io/blog/2013/01/14/form-helper-from-console</id>
    <content type="html"><![CDATA[<p>From the rails console.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="n">helper</span><span class="o">.</span><span class="n">text_field</span> <span class="ss">:object</span><span class="p">,</span> <span class="ss">:name</span>
</span><span class='line'>
</span><span class='line'><span class="s2">&quot;&lt;input id=</span><span class="se">\&quot;</span><span class="s2">object_name</span><span class="se">\&quot;</span><span class="s2"> name=</span><span class="se">\&quot;</span><span class="s2">object[name]</span><span class="se">\&quot;</span><span class="s2"> size=</span><span class="se">\&quot;</span><span class="s2">30</span><span class="se">\&quot;</span><span class="s2"> type=</span><span class="se">\&quot;</span><span class="s2">text</span><span class="se">\&quot;</span><span class="s2"> /&gt;&quot;</span>
</span></code></pre></td></tr></table></div></figure>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Set Default Value in Rails Model]]></title>
    <link href="http://tatums.github.io/blog/2013/01/14/set-default-value-in-rails-model/"/>
    <updated>2013-01-14T08:00:37-06:00</updated>
    <id>http://tatums.github.io/blog/2013/01/14/set-default-value-in-rails-model</id>
    <content type="html"><![CDATA[<p>I like to set default values in my models. This is the method I like to use.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="k">def</span> <span class="nf">after_initialize</span>
</span><span class='line'>  <span class="k">if</span> <span class="n">new_record?</span>
</span><span class='line'>    <span class="nb">self</span><span class="o">.</span><span class="n">upper_quantity</span> <span class="o">||=</span> <span class="mi">0</span><span class="o">.</span><span class="mi">0</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Failed to Connect to a Master Node at Localhost:27017]]></title>
    <link href="http://tatums.github.io/blog/2012/12/31/failed-to-connect-to-a-master-node-at-localhost-27017/"/>
    <updated>2012-12-31T09:05:06-06:00</updated>
    <id>http://tatums.github.io/blog/2012/12/31/failed-to-connect-to-a-master-node-at-localhost-27017</id>
    <content type="html"><![CDATA[<p>Everytime my server looses power, Mongo has trouble restarting. These commands fixes the problem.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>sudo rm /var/lib/mongodb/mongod.lock
</span></code></pre></td></tr></table></div></figure>




<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>sudo -u mongodb mongod -f /etc/mongodb.conf --repair
</span><span class='line'>sudo service mongodb restart
</span></code></pre></td></tr></table></div></figure>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Install Elastic Search on Ubuntu]]></title>
    <link href="http://tatums.github.io/blog/2012/12/30/install-elastic-search-on-ubuntu/"/>
    <updated>2012-12-30T09:07:42-06:00</updated>
    <id>http://tatums.github.io/blog/2012/12/30/install-elastic-search-on-ubuntu</id>
    <content type="html"><![CDATA[<p>Update Package Manager</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>sudo apt-get update
</span></code></pre></td></tr></table></div></figure>


<p>Install JRE</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>sudo apt-get install openjdk-7-jre-headless -y
</span></code></pre></td></tr></table></div></figure>


<p>Install Elastic Search</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>wget http://download.elasticsearch.org/elasticsearch/elasticsearch/elasticsearch-0.20.2.tar.gz -O elasticsearch.tar.gz
</span><span class='line'>tar -xf elasticsearch.tar.gz
</span><span class='line'>rm elasticsearch.tar.gz
</span><span class='line'>sudo mv elasticsearch-* elasticsearch
</span><span class='line'>sudo mv elasticsearch /usr/local/share
</span></code></pre></td></tr></table></div></figure>


<p>Install the Service Wrapper</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>curl -L http://github.com/elasticsearch/elasticsearch-servicewrapper/tarball/master <span class="p">|</span> tar -xz
</span><span class='line'>sudo mv *servicewrapper*/service /usr/local/share/elasticsearch/bin/
</span><span class='line'>rm -Rf *servicewrapper*
</span><span class='line'>sudo /usr/local/share/elasticsearch/bin/service/elasticsearch install
</span><span class='line'>sudo ln -s <span class="sb">`</span>readlink -f /usr/local/share/elasticsearch/bin/service/elasticsearch<span class="sb">`</span> /usr/local/bin/elasticsearch
</span><span class='line'>sudo service elasticsearch start
</span><span class='line'>curl http://localhost:9200
</span></code></pre></td></tr></table></div></figure>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Ubuntu Ip-address]]></title>
    <link href="http://tatums.github.io/blog/2012/12/16/ubuntu-ip-address/"/>
    <updated>2012-12-16T09:14:33-06:00</updated>
    <id>http://tatums.github.io/blog/2012/12/16/ubuntu-ip-address</id>
    <content type="html"><![CDATA[<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>sudo vim /etc/network/interfaces
</span></code></pre></td></tr></table></div></figure>




<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="c"># This file describes the network interfaces available on your system</span>
</span><span class='line'><span class="c"># and how to activate them. For more information, see interfaces(5).</span>
</span><span class='line'>
</span><span class='line'><span class="c"># The loopback network interface</span>
</span><span class='line'>auto lo
</span><span class='line'>iface lo inet loopback
</span><span class='line'>
</span><span class='line'><span class="c"># The primary network interface</span>
</span><span class='line'>auto eth0
</span><span class='line'>iface eth0 inet static
</span><span class='line'>address 192.168.1.4
</span><span class='line'>netmask 255.255.255.0
</span><span class='line'>gateway 192.168.1.1
</span></code></pre></td></tr></table></div></figure>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Add Public Ssh Key to Server]]></title>
    <link href="http://tatums.github.io/blog/2012/12/16/add-public-ssh-key-to-server/"/>
    <updated>2012-12-16T09:11:56-06:00</updated>
    <id>http://tatums.github.io/blog/2012/12/16/add-public-ssh-key-to-server</id>
    <content type="html"><![CDATA[<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="n">cat</span> <span class="o">~</span><span class="sr">/.ssh/i</span><span class="n">d_rsa</span><span class="o">.</span><span class="n">pub</span> <span class="o">|</span> <span class="n">ssh</span> <span class="n">user</span><span class="vi">@hostname</span> <span class="s1">&#39;cat &gt;&gt; .ssh/authorized_keys&#39;</span>
</span></code></pre></td></tr></table></div></figure>

]]></content>
  </entry>
  
</feed>
